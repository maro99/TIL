### 한 것   

1.Django에서 Redis를 이용해 Caching하기  블로그 글 보고 따라해보는중.  
https://jupiny.com/2018/02/27/caching-using-redis-on-django/

2.자료구조 6장 해쉬테이블 읽어보고 써보고 모르는것 찾아보는중.



### 질문  


1. wsgi.py와 config.settings는 무슨 관계인지? 왜 매번 runserver할때 이것을 export DJANGO SETTINGS MODULE= config.settings.local 해준것인지?  

일단 내가 생각해본것은 위 명령어는 런서버에 필요한 환경변수들(시크릿,디렉토리,설치엡,얼로우드호스트,데이터베이스 언어)을 가지고있는 settings를 가져와준다.  

wsgi.py안을 보면    
```
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

application = get_wsgi_application()
```  
이렇게 되있는데 이게 정확히 어떤 의미 인지?  

------>  [유튜브영상](https://www.youtube.com/watch?v=OMkOQFoUFZg) 보고 정리해보자.   

**wsgi**  
web server gateway interface  
서버와 우리의 장고 프로젝트 사이의 interface  

내가 어떻게 장고프로잭트를 host 하는지 생각해봤냐?  
호스팅 회상에 그냥 내 어썸한 프로젝트 올리면 될거라 생각할 수도 있다.-->그렇지않다.  

```
서버는 wsgi 인터페이스와 커뮤니케이트 하기 위해서 설정되야 한다.  
```
wsgi 가 하는 일은 ?  
서버에게 우리의 application과 communicate할 수 있게 해준다.  
사실 이건 단방향 커뮤니케이션이다.  
서버가 유저(client)로부터 request받으면  
이것을 우리의 application으로 보내준다.  
이때 서버는 wsgi를 통해서 reqeust를 보낸다.  
장고는 그 request를 받아서 작업을 하고  (view에서 object다루고~그런것인듯.)  
client에게 response돌려준다. 

**다시질문한다**   
그렇다면 왜? 바로 장고 - 서버 커뮤니케이션 안하고 wsgi 거치는건지?  


2. 호스트란?  
네트웍에 연결되어 있는 컴퓨터들.  
호스트 설정이란?  
도메인을 호스트의 IP에 연결하는 행위.(네임서버에 이것을 알린다.)  


3. 웹서버란?   
인터넷 통해서 요청된 웹 컨탠츠의 전달을 도와주는 하드위어와 소프트웨어.  
웹서버는 기본적으로 정적이다.  
client가 request를 통해 resource요청하면  
그 리소스를 그대로 보내주는것이 웹서버의 역할   


3.5 CGI? (Common Gateway Interface)  
[참고중](http://brownbears.tistory.com/350)  
웹서버에서 어플리케이션을 작동시키기 위한 인터페이스  
정적웹서버를 동적으로 기능하기 위해 등장.  
서버프로그램과 외부 프로그램 간의 인터페이스가 바로 CGI  
(기존에는 웹서버가 있고 클라이언트에서 외부 프로그램이 필요한 request가 오면 CGI를 통햬 외부 프로그램을 실행시켜 request에 응답하기도 했지만 요즘에는 웹서버에 인터프리터를 내장함으로써 따로 프로세스를 외부로 fork해서 외부프로그램 실행 안시키고 내부에서 다 처리한다.)  

```
요청 -> 웹서버(nginx) -> (웹서버가 직접실행)프로그램(c++등)  
```

3.7 wsgi다시..  
web server gateway interface  

파이썬에서 어플리케이션이 웹서버와 통신하기 위한 인터페이스.  
WSGI는 서버와 앱 양단으로 나눠져 있다.   
WSGI 리퀘스트를 처리하려면 서버에서 환경정보와 콜백함수를 앱에 제공해야한다.  
엡은 그 요청을 처리하고 콜백함수 통해 서버에 응답한다. 

웹서버와 WSGI를 지원하는 웹어플리케이션 사이에서 동작하며 
```
1.환경 변수가 바뀌면 타겟 URL에 따라서 request경로를 지정해줌.  
2.같은 프로세스에서 여러 애플리케이션과 프레임워크가 실행됨.(?)    
3.XSLT 스타일시트를 적용하는 것과 같이 전처리함(?)

``

( 내생각 정리 : django엡 같은경우 template를 그대로 보여주기도 하지만.이건 정말 기초적인 응답에 대한 리스폰스 돌려주는 웹서버 역할. 그이상을 하기위해, 예를들어 디비에서 유저목록 가져와서 템플릿에 뿌려준다든지.추가적 작업을 에플리케이션에서 처리하고 리스폰스로 client에 돌려주기 위해서는 웹서버와 어플리케이션 사이에 어떤 gateway interface가 있어서 웹서버로온 요청을 기본적 웹서버 처럼 바로 client로 돌려주지 않고 application으로 보내주는것이 필요한것. )  

```
요청 -> 웹서버 -> WSGI server(miidleware) - > WSGI를 지원하는 webapplication(django)  
```

3.8  
WSGI, CGI방식 차이는 ?  
WSGI는 CGI 디자인패턴을 가져다가 업그레이드 한 모델이다.  
CGI는 모든 리퀘스트마다 fork를 통해 서브프로세스를 띄워 요청을 처리해서 느리다. 또한 WSGI는 HTTP Request를 파싱하고 환경에 추가해서 사용자 가 fromat디테일 해방되고, response만들게 한다.  
WSGI는 파이썬에 종속된 개념. 


4. uwsgi, wsgi 차이는? 



5. 버퍼란?  
컴퓨팅에서, 버퍼(buffer, 문화어: 완충기억기)는 데이터를 한 곳에서 다른 한 곳으로 전송하는 동안 일시적으로 그 데이터를 보관하는 메모리의 영역이다. 버퍼링(buffering)이란 버퍼를 활용하는 방식 또는 버퍼를 채우는 동작을 말한다. 다른 말로 '큐(Queue)'라고도 표현한다.  


6. BM트리는 트리의 높이 낮춰서 대용량 데이터 저장하고 탐색 빠르게 하기 위함 이라 하는데...그럴거면 그냥 리스트로 놓고 쓰는게 좋지 않냐?    
---> 


### 알게된것   

1.  
자료구조 6장 해쉬테이블 공부중인데  
헤쉬테이블 중 확장해싱(재해시 를안하기위한방법) 에서   
동적해싱 에 나온 
디랙터리 ->  버킷의 관계가  
B+트리의 root와 leaf와의 관계와 비슷하다.  
동적해싱은 키를 받으면 이것을 해슁할때 이진수로 변환을 하는데  
이진수의 최소자리수 즉 우편의 자리수중 몇째 자리까지를  
디렉터리로부터 버킷으로 가리키는 index? 로 사용할 것인지를 깊이(Depth)로 나타낸다.  
이진수 끝자리 기반으로한 인덱스의자리수가 맞으면 디랙토리가 가리키고 있는 해당 버킷에 키값과 키값이 가리키는 값에 대한 주소? 가 저장된다.  
만약 이때 키값들이 버킷의 용량보다 커지게 되면 디렉토리와 버킷을 확장하는데 두가지 경우의 수가 있다.  

1. 첫번째 경우는  
넘치는 버킷의 깊이 가 버킷을 가리키는 디렉토리의 깊이보다 아직 작을때.  
이때는 버킷의 현재 깊이보다 한단계 높은 버킷을 두개 만들어서 넘치는 키, 값참조 들을 디렉토리에서-> 버킷으로 향할때 이용하는 이진수의 최소자리 숫자 기반의 인덱스에 따라서 넣어준다.  이경우 기존의 낮은 깊이의 버킷 하나에서 여러개 받고있던 디렉토리로 부터의 경로를 두 높은 깊이의 버킷이 알맞게 나눠갖는다.  

2. 두번째 경우는  
넘치는 버킷으 깊이가 버킷을 가리키는 디렉토리의 깊이와 같을때.  
이때는 디렉토리를 2배로 확장 시킬수밖에 없다. 그와 동시에 디렉토리의 깊이는 1이 추가된다.  
버킷쪽에서도 새롭게 깊어진 깊이의 버킷 두개가 생기고   
디렉토리로 부터 버킷으로 향할때 쓰는 이진수 최소x자리 인덱스에 따라 알맞게 키,값참조들이 나눠진다.  


